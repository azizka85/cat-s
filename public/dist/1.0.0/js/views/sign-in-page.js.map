{
  "version": 3,
  "sources": ["../../../../../src/client/views/pages/sign-in-page.ts"],
  "sourcesContent": ["import { Page } from '@azizka/router';\r\n\r\nimport { View } from '../view';\r\n\r\nimport { AuthServiceComponent } from '../components/auth-service-component';\r\n\r\nimport { loadContent, navigateHandler } from '../../helpers';\r\n\r\nimport { context } from '../../globals';\r\n\r\nimport { DEFAULT_LANGUAGE } from '../../../globals';\r\n\r\nexport class SignInPage implements View {\r\n  protected static page: SignInPage | null = null;\r\n\r\n  protected node: HTMLElement | null = null;\r\n\r\n  protected titleElem: HTMLElement | null = null;\r\n\r\n  protected emailInputElem: HTMLInputElement | null = null;\r\n\r\n  protected passwordInputElem: HTMLInputElement | null = null;\r\n  protected passwordLabelElem: HTMLElement | null = null;\r\n\r\n  protected signUpBtn: HTMLElement | null = null;\r\n  protected signInBtn: HTMLElement | null = null;\r\n  protected cancelBtn: HTMLElement | null = null;\r\n\r\n  protected authService: AuthServiceComponent | null = null;\r\n\r\n  protected signUpBtnClickHandler: (event: MouseEvent) => void;\r\n  protected cancelBtnClickHandler: (event: MouseEvent) => void;\r\n\r\n  protected formSubmitHandler: (event: SubmitEvent) => void;\r\n\r\n  static get instance(): SignInPage {\r\n    if(!SignInPage.page) {\r\n      SignInPage.page = new SignInPage();\r\n    }\r\n\r\n    return SignInPage.page;\r\n  }\r\n\r\n  constructor() {\r\n    this.formSubmitHandler = event => {\r\n      event.preventDefault();\r\n\r\n      const form = this.node?.querySelector('.main-card form') as HTMLFormElement;\r\n      const data = new FormData(form as HTMLFormElement);\r\n\r\n      console.log('Form submited: ');  \r\n      \r\n      data.forEach((value, key) => {\r\n        console.log(key + ':', value);          \r\n      });    \r\n    };\r\n\r\n    this.signUpBtnClickHandler = event => navigateHandler(event, this.signUpBtn as HTMLElement);\r\n    this.cancelBtnClickHandler = event => navigateHandler(event, this.cancelBtn as HTMLElement);\r\n  }\r\n\r\n  get elem(): HTMLElement | null {\r\n    return this.node;\r\n  }\r\n\r\n  async init(parent: HTMLElement | null, firstTime: boolean) {\r\n    let content = await loadContent(parent, firstTime, []);    \r\n\r\n    this.node = content.querySelector('[data-page=\"signin-page\"]') || null;    \r\n\r\n    const form = this.node?.querySelector('.main-card form') as HTMLFormElement;\r\n\r\n    this.titleElem = this.node?.querySelector('[data-title=\"main\"]') || null;\r\n\r\n    this.emailInputElem = form?.querySelector('#email') || null;\r\n\r\n    this.passwordInputElem = form?.querySelector('#password') || null;\r\n    this.passwordLabelElem = form?.querySelector('#password-label') || null;\r\n\r\n    this.signUpBtn = form?.querySelector('[data-button=\"sign-up\"]') || null;\r\n    this.signInBtn = form?.querySelector('[data-button=\"sign-in\"]') || null;\r\n    this.cancelBtn = form?.querySelector('[data-button=\"cancel\"]') || null;    \r\n\r\n    this.authService = new AuthServiceComponent();\r\n    await this.authService.init(this, firstTime);\r\n    \r\n    return content;\r\n  }\r\n\r\n  async mount() {\r\n    const form = this.node?.querySelector('.main-card form') as HTMLFormElement;\r\n\r\n    form?.addEventListener('submit', this.formSubmitHandler);\r\n    this.signUpBtn?.addEventListener('click', this.signUpBtnClickHandler);\r\n    this.cancelBtn?.addEventListener('click', this.cancelBtnClickHandler);\r\n  }\r\n\r\n  async unmount() {\r\n    const form = this.node?.querySelector('.main-card form') as HTMLFormElement;\r\n\r\n    form?.removeEventListener('submit', this.formSubmitHandler);\r\n    this.signUpBtn?.removeEventListener('click', this.signUpBtnClickHandler);\r\n    this.cancelBtn?.removeEventListener('click', this.cancelBtnClickHandler);\r\n  }\r\n\r\n  async load(lang: string, page: Page, firstLoad: boolean): Promise<void> {\r\n    if(this.titleElem) {\r\n      this.titleElem.textContent = context.tr('Sign In');\r\n    }\r\n\r\n    if(this.passwordInputElem) {\r\n      this.passwordInputElem.placeholder = context.tr('Password') + '*';\r\n    }\r\n\r\n    if(this.passwordLabelElem) {\r\n      this.passwordLabelElem.textContent = context.tr('Password') + '*';\r\n    }\r\n\r\n    if(this.signUpBtn) {\r\n      this.signUpBtn.textContent = context.tr('Sign Up');\r\n    }\r\n\r\n    if(this.signInBtn) {\r\n      this.signInBtn.textContent = context.tr('Sign In');\r\n    }\r\n\r\n    if(this.cancelBtn) {\r\n      this.cancelBtn.textContent = context.tr('Cancel');\r\n    }\r\n\r\n    this.signUpBtn?.setAttribute('href', (lang === DEFAULT_LANGUAGE ? '' : `/${lang}`) + '/sign-up');\r\n    this.cancelBtn?.setAttribute('href', (lang === DEFAULT_LANGUAGE ? '' : `/${lang}`) + '/');\r\n\r\n    await this.authService?.load?.(lang, page, firstLoad);\r\n  }\r\n}\r\n"],
  "mappings": ";;;;;;;;;;;;;;AAYO,wBAAiC;AAAA,EAG5B,OAA2B;AAAA,EAE3B,YAAgC;AAAA,EAEhC,iBAA0C;AAAA,EAE1C,oBAA6C;AAAA,EAC7C,oBAAwC;AAAA,EAExC,YAAgC;AAAA,EAChC,YAAgC;AAAA,EAChC,YAAgC;AAAA,EAEhC,cAA2C;AAAA,EAE3C;AAAA,EACA;AAAA,EAEA;AAAA,aAEC,WAAuB;AAChC,QAAG,CAAC,YAAW,MAAM;AACnB,kBAAW,OAAO,IAAI;AAAA;AAGxB,WAAO,YAAW;AAAA;AAAA,EAGpB,cAAc;AACZ,SAAK,oBAAoB,WAAS;AAChC,YAAM;AAEN,YAAM,OAAO,KAAK,MAAM,cAAc;AACtC,YAAM,OAAO,IAAI,SAAS;AAE1B,cAAQ,IAAI;AAEZ,WAAK,QAAQ,CAAC,OAAO,QAAQ;AAC3B,gBAAQ,IAAI,MAAM,KAAK;AAAA;AAAA;AAI3B,SAAK,wBAAwB,WAAS,gBAAgB,OAAO,KAAK;AAClE,SAAK,wBAAwB,WAAS,gBAAgB,OAAO,KAAK;AAAA;AAAA,MAGhE,OAA2B;AAC7B,WAAO,KAAK;AAAA;AAAA,QAGR,KAAK,QAA4B,WAAoB;AACzD,QAAI,UAAU,MAAM,YAAY,QAAQ,WAAW;AAEnD,SAAK,OAAO,QAAQ,cAAc,gCAAgC;AAElE,UAAM,OAAO,KAAK,MAAM,cAAc;AAEtC,SAAK,YAAY,KAAK,MAAM,cAAc,0BAA0B;AAEpE,SAAK,iBAAiB,MAAM,cAAc,aAAa;AAEvD,SAAK,oBAAoB,MAAM,cAAc,gBAAgB;AAC7D,SAAK,oBAAoB,MAAM,cAAc,sBAAsB;AAEnE,SAAK,YAAY,MAAM,cAAc,8BAA8B;AACnE,SAAK,YAAY,MAAM,cAAc,8BAA8B;AACnE,SAAK,YAAY,MAAM,cAAc,6BAA6B;AAElE,SAAK,cAAc,IAAI;AACvB,UAAM,KAAK,YAAY,KAAK,MAAM;AAElC,WAAO;AAAA;AAAA,QAGH,QAAQ;AACZ,UAAM,OAAO,KAAK,MAAM,cAAc;AAEtC,UAAM,iBAAiB,UAAU,KAAK;AACtC,SAAK,WAAW,iBAAiB,SAAS,KAAK;AAC/C,SAAK,WAAW,iBAAiB,SAAS,KAAK;AAAA;AAAA,QAG3C,UAAU;AACd,UAAM,OAAO,KAAK,MAAM,cAAc;AAEtC,UAAM,oBAAoB,UAAU,KAAK;AACzC,SAAK,WAAW,oBAAoB,SAAS,KAAK;AAClD,SAAK,WAAW,oBAAoB,SAAS,KAAK;AAAA;AAAA,QAG9C,KAAK,MAAc,MAAY,WAAmC;AACtE,QAAG,KAAK,WAAW;AACjB,WAAK,UAAU,cAAc,QAAQ,GAAG;AAAA;AAG1C,QAAG,KAAK,mBAAmB;AACzB,WAAK,kBAAkB,cAAc,QAAQ,GAAG,cAAc;AAAA;AAGhE,QAAG,KAAK,mBAAmB;AACzB,WAAK,kBAAkB,cAAc,QAAQ,GAAG,cAAc;AAAA;AAGhE,QAAG,KAAK,WAAW;AACjB,WAAK,UAAU,cAAc,QAAQ,GAAG;AAAA;AAG1C,QAAG,KAAK,WAAW;AACjB,WAAK,UAAU,cAAc,QAAQ,GAAG;AAAA;AAG1C,QAAG,KAAK,WAAW;AACjB,WAAK,UAAU,cAAc,QAAQ,GAAG;AAAA;AAG1C,SAAK,WAAW,aAAa,QAAS,UAAS,mBAAmB,KAAK,IAAI,UAAU;AACrF,SAAK,WAAW,aAAa,QAAS,UAAS,mBAAmB,KAAK,IAAI,UAAU;AAErF,UAAM,KAAK,aAAa,OAAO,MAAM,MAAM;AAAA;AAAA;AAzHxC;AACY,cADZ,YACY,QAA0B;",
  "names": []
}
