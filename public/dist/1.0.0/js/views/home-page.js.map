{
  "version": 3,
  "sources": ["../../../../../src/client/views/pages/home-page.ts"],
  "sourcesContent": ["import { Page } from '@azizka/router';\r\n\r\nimport { View } from '../view';\r\n\r\nimport { ScrollActionTop, ScrollEventData, ScrollEventType, ScrollActionTo } from '../../data/scroll';\r\n\r\nimport { loadContent } from '../../helpers';\r\n\r\nimport { layouts } from '../../globals';\r\n\r\nexport class HomePage implements View {\r\n  protected static page: HomePage | null = null;\r\n\r\n  protected node: HTMLElement | null = null;\r\n\r\n  protected scrollTopBtn: HTMLElement | null = null;\r\n\r\n  protected scrollTopBtnClickHandler: () => void;\r\n\r\n  protected windowScrollHandler: (event: Event) => void;\r\n\r\n  protected currScroll = 0;\r\n\r\n  static get instance(): HomePage {\r\n    if(!HomePage.page) {\r\n      HomePage.page = new HomePage();\r\n    }\r\n\r\n    return HomePage.page;\r\n  }\r\n\r\n  constructor() {\r\n    this.scrollTopBtnClickHandler = () => {\r\n      layouts['main-layout']?.performAction?.(ScrollActionTop, null);\r\n    };\r\n\r\n    this.windowScrollHandler = (event) => {\r\n      const data = (event as CustomEvent<ScrollEventData>).detail;\r\n\r\n      if(data.currScroll <= 0) {\r\n        this.scrollTopBtn?.classList.add('btn-exited');\r\n      } else {\r\n        this.scrollTopBtn?.classList.remove('btn-exited');\r\n      }\r\n\r\n      this.currScroll = data.currScroll;\r\n    };\r\n  }\r\n\r\n  get elem(): HTMLElement | null {\r\n    return this.node;\r\n  }\r\n\r\n  async init(parent: HTMLElement | null, firstTime: boolean) {\r\n    let content = await loadContent(parent, firstTime, ['main-layout']);    \r\n\r\n    this.node = content.querySelector('[data-page=\"home-page\"]') || null;\r\n\r\n    this.scrollTopBtn = this.node?.querySelector('[data-button=\"scroll-top\"]') || null;    \r\n    \r\n    return content;\r\n  }\r\n\r\n  async mount() {\r\n    this.scrollTopBtn?.addEventListener('click', this.scrollTopBtnClickHandler);\r\n\r\n    layouts['main-layout']?.listen?.(ScrollEventType, this.windowScrollHandler);\r\n  }\r\n\r\n  async unmount() {\r\n    this.scrollTopBtn?.removeEventListener('click', this.scrollTopBtnClickHandler);\r\n\r\n    layouts['main-layout']?.unlisten?.(ScrollEventType, this.windowScrollHandler);\r\n  }\r\n\r\n  async load(lang: string, page: Page, firstLoad: boolean) {\r\n    layouts['main-layout']?.performAction?.(ScrollActionTo, {\r\n      top: this.currScroll,\r\n      noSmooth: true\r\n    });\r\n  }\r\n}\r\n"],
  "mappings": ";;;;;;;;;;;;;;AAUO,sBAA+B;AAAA,EAG1B,OAA2B;AAAA,EAE3B,eAAmC;AAAA,EAEnC;AAAA,EAEA;AAAA,EAEA,aAAa;AAAA,aAEZ,WAAqB;AAC9B,QAAG,CAAC,UAAS,MAAM;AACjB,gBAAS,OAAO,IAAI;AAAA;AAGtB,WAAO,UAAS;AAAA;AAAA,EAGlB,cAAc;AACZ,SAAK,2BAA2B,MAAM;AACpC,cAAQ,gBAAgB,gBAAgB,iBAAiB;AAAA;AAG3D,SAAK,sBAAsB,CAAC,UAAU;AACpC,YAAM,OAAQ,MAAuC;AAErD,UAAG,KAAK,cAAc,GAAG;AACvB,aAAK,cAAc,UAAU,IAAI;AAAA,aAC5B;AACL,aAAK,cAAc,UAAU,OAAO;AAAA;AAGtC,WAAK,aAAa,KAAK;AAAA;AAAA;AAAA,MAIvB,OAA2B;AAC7B,WAAO,KAAK;AAAA;AAAA,QAGR,KAAK,QAA4B,WAAoB;AACzD,QAAI,UAAU,MAAM,YAAY,QAAQ,WAAW,CAAC;AAEpD,SAAK,OAAO,QAAQ,cAAc,8BAA8B;AAEhE,SAAK,eAAe,KAAK,MAAM,cAAc,iCAAiC;AAE9E,WAAO;AAAA;AAAA,QAGH,QAAQ;AACZ,SAAK,cAAc,iBAAiB,SAAS,KAAK;AAElD,YAAQ,gBAAgB,SAAS,iBAAiB,KAAK;AAAA;AAAA,QAGnD,UAAU;AACd,SAAK,cAAc,oBAAoB,SAAS,KAAK;AAErD,YAAQ,gBAAgB,WAAW,iBAAiB,KAAK;AAAA;AAAA,QAGrD,KAAK,MAAc,MAAY,WAAoB;AACvD,YAAQ,gBAAgB,gBAAgB,gBAAgB;AAAA,MACtD,KAAK,KAAK;AAAA,MACV,UAAU;AAAA;AAAA;AAAA;AApET;AACY,cADZ,UACY,QAAwB;",
  "names": []
}
